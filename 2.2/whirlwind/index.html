
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://thebb.github.io/Gold/2.2/whirlwind/">
      
      
        <link rel="prev" href="..">
      
      
      
      <link rel="icon" href="../assets/logo-640.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.12">
    
    
      
        <title>Whirlwind tour - Gold language</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#whirlwind-tour" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Gold language" class="md-header__button md-logo" aria-label="Gold language" data-md-component="logo">
      
  <img src="../assets/logo-640.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gold language
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Whirlwind tour
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Gold language" class="md-nav__button md-logo" aria-label="Gold language" data-md-component="logo">
      
  <img src="../assets/logo-640.png" alt="logo">

    </a>
    Gold language
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Whirlwind tour
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Whirlwind tour
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-features-of-gold" class="md-nav__link">
    <span class="md-ellipsis">
      Core features of Gold
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    <span class="md-ellipsis">
      Lists
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objects" class="md-nav__link">
    <span class="md-ellipsis">
      Objects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binding-names" class="md-nav__link">
    <span class="md-ellipsis">
      Binding names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#destructuring" class="md-nav__link">
    <span class="md-ellipsis">
      Destructuring
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branching" class="md-nav__link">
    <span class="md-ellipsis">
      Branching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-collections" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced collections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-strings" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced strings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing" class="md-nav__link">
    <span class="md-ellipsis">
      Importing
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-features-of-gold" class="md-nav__link">
    <span class="md-ellipsis">
      Core features of Gold
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    <span class="md-ellipsis">
      Lists
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objects" class="md-nav__link">
    <span class="md-ellipsis">
      Objects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binding-names" class="md-nav__link">
    <span class="md-ellipsis">
      Binding names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#destructuring" class="md-nav__link">
    <span class="md-ellipsis">
      Destructuring
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branching" class="md-nav__link">
    <span class="md-ellipsis">
      Branching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-collections" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced collections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-strings" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced strings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing" class="md-nav__link">
    <span class="md-ellipsis">
      Importing
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="whirlwind-tour">Whirlwind tour</h1>
<h2 id="core-features-of-gold">Core features of Gold</h2>
<p>A Gold file consists of an arbitrary number of top-level statements, of which
currently there is only one type: imports. These top-level statements are then
followed by a <em>single</em> expression. The value of this expression is the value of
the file when evaluated.</p>
<p>A Gold program cannot affect its environment in any way: it cannot write files
to the disk, make network requests, etc. It also cannot (for the moment) read
environment variables. The only data available to a Gold program is the data in
the file itself, and other files that it imports. As such, the value of a Gold
file when evaluated is necessarily fixed and immutable and a faithful
representation of the source files: it cannot change if the the source files
also don't change.</p>
<p>Aside from the top-level import statements, Gold only has expressions - no
statements. Furthermore, every Gold value is immutable.</p>
<p>Except in very specific circumstances, Gold is whitespace and indentation
insensitive. In every case where comma-separated lists are expected, Gold allows
an optional trailing comma.</p>
<p>Comments are starting with a pound character <code>#</code> and last until the end of the
line.</p>
<h2 id="types">Types</h2>
<p>Gold support all the JSON-like types, with the important addition of
<em>functions</em>. In addition to this, Gold distinguishes integers and floating-point
*numbers.</p>
<ul>
<li>integers: <code>0</code>, <code>1</code>, <code>-3</code> etc.,</li>
<li>floating-point numbers: <code>1.0</code>, <code>3.14</code>, <code>0.2718e-1</code> etc.,</li>
<li>strings, which are double-quoted: <code>""</code>, <code>"Hello World"</code> etc.,</li>
<li>the singleton objects <em>null</em>, <em>true</em> and <em>false</em>,</li>
<li>lists of other values,</li>
<li>objects (mappings of strings to other values) and</li>
<li>functions.</li>
</ul>
<h2 id="lists">Lists</h2>
<p>Lists are constructed with square brackets surrounding a comma-separated list of
values.</p>
<pre><code>[0, 1.0, &quot;here is a string&quot;]
</code></pre>
<p>An empty list is just</p>
<pre><code>[]
</code></pre>
<p>Use square brackets to index a list and extract its elements</p>
<pre><code>[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;][1]   # =&gt; &quot;b&quot;
</code></pre>
<p>In Gold, indexing is zero-based.</p>
<h2 id="objects">Objects</h2>
<p>Objects are constructed with curly brackets surrounding a comma-separated list of key-value pairs. The key and the value are themselves separated by a colon. In most cases it's not necessary to quote the key.</p>
<pre><code>{
    my-key: &quot;value&quot;,
    my-other-key: &quot;some other value&quot;,
}
</code></pre>
<p>Quoting the key is necessary if it contains a colon, or if it starts with a quotation mark.</p>
<pre><code>{
    &quot;with-colon:&quot;: true,
    &quot;\&quot;with-quote&quot;: true,
}
</code></pre>
<p>An empty object is just</p>
<pre><code>{}
</code></pre>
<p>Gold does not currently support objects whose keys are not strings.</p>
<p>Use dot-access syntax to access values from an object, in case the key is compatible with Gold syntax:</p>
<pre><code>{x: 1}.x   # =&gt; 1
</code></pre>
<p>But this wouldn't work, since the hyphen is interpreted as a minus operator:</p>
<pre><code>{some-key: 1}.some-key
</code></pre>
<p>In this case, rely on explicit indexing with square brackets:</p>
<pre><code>{some-key: 1}[&quot;some-key&quot;]   # =&gt; 1
</code></pre>
<h2 id="binding-names">Binding names</h2>
<p>To bind values to names, use the <em>let</em> expression:</p>
<pre><code>let x = 1
in 2 + x
</code></pre>
<p>You can bind multiple names at once:</p>
<pre><code>let x = 1
let y = 2
in x + y
</code></pre>
<p>After a sequence of bindings and the keyword <code>in</code> follows a <em>single</em> expression
in which all names bound previously are valid. The value of this expression
becomes the value of the whole let-expression.</p>
<h2 id="destructuring">Destructuring</h2>
<p>In let-expressions (and anywhere else where values are bound to names, see
<a href="#advanced-collections">Advanced collections</a> and <a href="#functions">Functions</a>),
Gold support destructuring assingments.</p>
<p>You can destructure lists:</p>
<pre><code>let [a, b, c] = [1, 2, 3]
in a + b + c
</code></pre>
<p>and objects:</p>
<pre><code>let {a, b, c} = {a: 1, b: 2, c: 3}
in a + b + c
</code></pre>
<p>Use the <code>as</code> keyword in object destructuring to use a different bound name than
the key in the object:</p>
<pre><code>let {a as x, b as y, c as z} = {a: 1, b: 2, c: 3}
in x + y + z
</code></pre>
<p>In both list and object destructuring contexts, you can provide default values
if the right hand side lacks the relevant values:</p>
<pre><code>let [a, b, c = 3] = [1, 2]
in a + b + c

let {a, b, c = 3} = {a: 1, b: 2}
in a + b + c
</code></pre>
<p>Destructuring a list that is too long is an error:</p>
<pre><code>let [a, b, c] = [1, 2, 3, 4]   # Error here!
in a + b + c
</code></pre>
<p>To explicitly ignore extraneous values, slurp them by using the ellipsis
operator:</p>
<pre><code>let [a, b, c, ...] = [1, 2, 3, 4]
in a + b + c
</code></pre>
<p>or, if the extraneous values are important, bind them to a name too. This will
produce a list called <code>rest</code>:</p>
<pre><code>let [a, b, c, ...rest] = [1, 2, 3, 4]
in a + b + c + rest[0]
</code></pre>
<p>You can also collect extraneous key-value pairs in an object:</p>
<pre><code>let {a, b, ...rest} = {a: 1, b: 2, c: 3, d: 4}
in a + b + rest.c + rest.d
</code></pre>
<p>Note that destructuring an object with too many keys <em>is not an error</em>, so there
is no need to do something like this:</p>
<pre><code>let {a, b, ...} = {a: 1, b: 2, c: 3}
in a + b
</code></pre>
<p>And, in fact, that syntax is not valid. Instead, his will work just fine:</p>
<pre><code>let {a, b} = {a: 1, b: 2, c: 3}
in a + b
</code></pre>
<p>You can also perform destructuring several levels deep. This pattern, for
example, will extract the key <code>c: 1</code> inside a list in an object in a list in an
object:</p>
<pre><code>let {a as [{b as [{c}]}]} = {a: [{b: [{c: 1}]}]}
in a
</code></pre>
<h2 id="branching">Branching</h2>
<p>Gold has a single branching expression:</p>
<pre><code>if condition then expression else expression
</code></pre>
<p>Since this is an expression (like everything else in Gold), the <em>else</em> branch is
not optional.</p>
<p>The value of <em>condition</em> can be anything - not just <em>true</em> or <em>false</em>. For the purposes of branching,
everything is considered <em>true</em> except</p>
<ul>
<li><em>false</em></li>
<li><em>null</em></li>
<li>the integer <code>0</code> and the floating-point value <code>0.0</code></li>
</ul>
<p>Notably, empty lists and objects are considered truthy.</p>
<h2 id="advanced-collections">Advanced collections</h2>
<p>Gold supports a number of features for easily performing advanced logic when
constructing collections (lists and objects). This is useful because, Gold
objects being immutable, it's not possible to initialize e.g. and empty list and
then fill it later, which you might do in Python:</p>
<pre><code class="language-python">mylist = []
# fill mylist with elements
</code></pre>
<p>First, it's possible to conditionally add elements:</p>
<pre><code>[
    1,
    if condition: 2,
    3,
]
</code></pre>
<p>This may evaluate to <code>[1, 2, 3]</code> or <code>[1, 3]</code> depending on whether the condition
is satisfed. Note that this is very different from the following:</p>
<pre><code>[
    1,
    if condition 2 else null,
    3,
]
</code></pre>
<p>which is a list that <em>always</em> contains three elements: either <code>[1, 2, 3]</code> or
<code>[1, null, 3]</code>.</p>
<p>It's also possible to loop over an existing collection to add its elements to a
new collection:</p>
<pre><code>let numbers = [3, 4]
in [
    1,
    2,
    for n in numbers: n,
    5,
]
</code></pre>
<p>which evaluates to <code>[1, 2, 3, 4, 5]</code>. For this usage, the following usage of the
splicing operator <code>...</code> is equivalent, and probably preferred:</p>
<pre><code>let numbers = [3, 4]
in [1, 2, ...numbers, 5]
</code></pre>
<p>But the <code>for x in y</code> syntax has two important advantages. First, it is possible
to perform destructuring:</p>
<pre><code>let numbers = [[3], [4]]
in [
    1,
    2,
    for [n] in numbers: n,
    5,
]
</code></pre>
<p>Second, the value produced may be any expression, so that this will also work:</p>
<pre><code>let numbers = [[3], [4]]
in [
    1,
    2,
    for n in numbers: n[0],
    5,
]
</code></pre>
<p>And, indeed, loops and conditions may be nested arbitrarily deep:</p>
<pre><code># Extract the names of all adults
let people = [
    {name: &quot;Bob&quot;, age: 42},
    {name: &quot;Eve&quot;, age: 24},
    {name: &quot;Jill&quot;, age: 12},
    {name: &quot;Adam&quot;, age: 15},
    {name: &quot;Patricia&quot;, age: 72},
]
in [
    for {name, age} in people:
        if age &gt; 18: name
]
</code></pre>
<p>All the above works equally well with objects as with lists, with one important
caveat. Consider the following modification of the above code to filter a list
of people to obtain a list of adults.</p>
<pre><code># Extract ages of all adults
# ...
in {
    for {name, age} in people:
        if age &gt; 18:
            name: age
}
</code></pre>
<p>We only needed to use curly braces instead of square ones, and change <code>name</code>
into <code>name: age</code> for the result to be a valid object. However, this will not
work as expected. The reason is that in an object, <code>{name: age}</code> interprets
<code>name</code> as the literal key, not a bound name to look up.</p>
<p>This can be fixed using <a href="#advanced-strings">string interpolation</a>:</p>
<pre><code># ...
in {
    for {name, age} in people:
        if age &gt; 18:
            &quot;$name&quot;: age
}
</code></pre>
<p>However, this particular use-case is common enough that Gold supports the
alternative syntax <code>$key: value</code></p>
<pre><code># ...
in {
    for {name, age} in people:
        if age &gt; 18:
            $name: age
}
</code></pre>
<h2 id="advanced-strings">Advanced strings</h2>
<p>Gold supports string interpolation of other values:</p>
<pre><code>let a = &quot;Gold&quot;
in &quot;This language is ${a}&quot;
</code></pre>
<p>The curly braces are mandatory. The expression to be interpolated can of course
be more sophisticated than just a name:</p>
<pre><code>&quot;1 + 2 is ${1 + 2}&quot;
</code></pre>
<p>Gold does not currently support format specifiers in string interpolation.</p>
<p>To facilitate long strings, Gold supports juxtaposition:</p>
<pre><code>&quot;here\n&quot;
&quot;is\a&quot;
&quot;multiline\n&quot;
&quot;string\n&quot;
</code></pre>
<p>Note that the newlines must still be explicitly provided: juxtaposition is just
concatenation - no extra characters are added between each part.</p>
<p>To facilitate writing objects with string values, which is common in many
configuration files, Gold provides the following long-form string syntax:</p>
<pre><code>{
    key:: Some text goes here
    normal-key: false,
}
</code></pre>
<p>After a double colon, the string is read from the first non-whitespace character
until the end of the last line that precedes a line that is indented <em>not more
than</em> the line where the string started. In this example, that line is the third
line with the closing brace, which means that the string just contains the text
<code>"Some text goes here"</code>.</p>
<p>Note that there is <em>no comma</em> after such a string before the next element of the
object. If there were, it would be treated as part of the string, not a
syntactical element.</p>
<p>You can use this to create multiline strings too:</p>
<pre><code>{
    key:: This is the first line,
        this is the second line,
        and this is the third line.
    other-key: true,
}
</code></pre>
<p>From the second line forward, the greatest common indentation is stripped from
all lines. Thus the string above could also be rendered as</p>
<pre><code>&quot;This is the first line,\nthis is the second line,\nand this is the third line.&quot;
</code></pre>
<p>If the first line is empty, it is ignored. Extra indentation is not stripped:</p>
<pre><code>{
    example::
        # This is a faithful representation of Python code with indentation
        def func(x, y):
            return x + y
        print(func(1, 2))
}
</code></pre>
<h2 id="functions">Functions</h2>
<p>Functions are defined using the syntax</p>
<pre><code>|param1, parm2, ...| expression
</code></pre>
<p>Where <em>expression</em> may depend on the values of <em>param1</em>, <em>param2</em>, etc.</p>
<p>Functions in Gold are always anonymous, and must be called immediately or bound
to a name to have an effect. For example:</p>
<pre><code>let add = |x, y| x + y
in add(1, 2)
</code></pre>
<p>or</p>
<pre><code>(|x, y| x + y)(1, 2)
</code></pre>
<p>Functions may take any number of parameters (including none at all), and form
closures around non-local names. For example:</p>
<pre><code>let make_adder = |x| |y| x + y
let adder = make_adder(3)
let x = 4
in adder(5)
</code></pre>
<p>The <code>make_adder</code> function is a function that returns a function. The value of
<em>x</em> referred to by the function <em>adder</em> is enclosed over and is untainted by the
later binding of <em>x</em> to 4.</p>
<p>Functions may take positional as well as keyword parameters. The two kinds of
parameters are separated by a semicolon:</p>
<pre><code>|x; y| x + y
</code></pre>
<p>This function can be called in this way:</p>
<pre><code>let add = |x; y| x + y
in add(1, y: 2)
</code></pre>
<p>but not in either of these ways:</p>
<pre><code>add(1, 2)
add(x: 1, y: 2)
</code></pre>
<p>In Gold, positional and keyword parameters are strictly distinct.</p>
<p>Functions which only accept keyword parameters can be defined with the
alternative syntax:</p>
<pre><code>{|x, y, z|} x + y + z
</code></pre>
<p>Althouth this is perfectly valid (although somewhat ugly):</p>
<pre><code>|; x, y, z| x + y + z
</code></pre>
<p>Function parameters are syntactically equivalent to list and object
destructuring expressions, respectively. Anything that works in those contexts
also works in function definitions:</p>
<pre><code>let sum_first_elements = |[x, ...], [y, ...]| x + y
in sum_first_elements([1, 2], [3, 4])
</code></pre>
<p>Most notably, default parameter values:</p>
<pre><code>|x, y = 2; multiply = false| if multiply then x * y else x + y
</code></pre>
<h2 id="importing">Importing</h2>
<p>Gold supports importing code and data from other files. The <em>import</em> statement
takes a path to a file, which is always relative to the file currently being
loaded. Gold then evaluates that file and assigns the resulting value to a name
or a destructuring pattern.</p>
<p>This can be used to write libraries of functions. If this is the contents of the
file <code>mylib.gold</code>:</p>
<pre><code>{
    add: |x, y| x + y,
}
</code></pre>
<p>The function <em>add</em> can then be used from another file like this:</p>
<pre><code>import &quot;mylib.gold&quot; as mylib
mylib.add(1, 2)
</code></pre>
<p>or like this:</p>
<pre><code>import &quot;mylib.gold&quot; as {add}
add(1, 2)
</code></pre>
<p>Of course, there is no requirement that the value of an imported file must be an
object. For the single function <em>add</em>, the following would work just as well:</p>
<pre><code># mylib.gold
|x, y| x + y

# Other file
import &quot;mylib.gold&quot; as add
add(1, 2)
</code></pre>
<p>Imports are <em>statements</em> and must be found at the beginning of a file preceding
the expression to evaluate. It is not possible to import files mid-evaluation.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 SINTEF AS
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
    
  </body>
</html>